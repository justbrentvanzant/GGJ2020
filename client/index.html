<html>
    <head>
        <title>Repair Crew</title>
         <link rel="stylesheet" type="text/css" href="/client/css/main.css">
        <link href="https://fonts.googleapis.com/css?family=Comfortaa|Righteous&display=swap" rel="stylesheet">

    </head>
    <body>
        <div id="head">
            <h1>Repair Crew</h1>
        </div> 
        <div id="game">
            <div id="gameCanvas">

            </div>  
            <div id="chat-text" style="width:100%;height:100%;overflow-y:scroll">
                <div>Enter /{item name} to contribute items</div>
            </div>
            <form id="chat-form">
                <input id="chat-input" type="text" style="width:100%"></input>
            </form>
        </div>
     
         
         <div id="playerInventory">
           
        </div>
        <script src="https://cdn.socket.io/socket.io-1.4.5.js"></script>
    <script>
        var chatText = document.getElementById('chat-text');
        var chatInput = document.getElementById('chat-input');
        var chatForm = document.getElementById('chat-form');


        var socket = io();
       
        socket.on('addToChat',function(data){
            chatText.innerHTML += '<div>' + data + '</div>';
        });

        chatForm.onsubmit = function(e){
            e.preventDefault();
            socket.emit('sendMsgToServer',chatInput.value);
            chatInput.value = '';      
        }
       
        document.onkeydown = function(event){
            if(event.keyCode === 68)    //d
                socket.emit('keyPress',{inputId:'right',state:true});
            else if(event.keyCode === 83)   //s
                socket.emit('keyPress',{inputId:'down',state:true});
            else if(event.keyCode === 65) //a
                socket.emit('keyPress',{inputId:'left',state:true});
            else if(event.keyCode === 87) // w
                socket.emit('keyPress',{inputId:'up',state:true});
               
        }
        document.onkeyup = function(event){
            if(event.keyCode === 68)    //d
                socket.emit('keyPress',{inputId:'right',state:false});
            else if(event.keyCode === 83)   //s
                socket.emit('keyPress',{inputId:'down',state:false});
            else if(event.keyCode === 65) //a
                socket.emit('keyPress',{inputId:'left',state:false});
            else if(event.keyCode === 87) // w
                socket.emit('keyPress',{inputId:'up',state:false});
        }   
    </script>
    </body>
</html>